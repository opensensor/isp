# Add include path
ccflags-y += -I$(src)/include

# Define DIR if you're using a subdirectory structure
# If files are in current directory, remove $(DIR)/ prefix
DIR := .

# Main ISP module objects
tx-isp-t31-objs := tx-isp-module.o \
                   tx_isp_core.o \
                   tx_isp_init.o \
                   tx_isp_reset.o \
                   tx_isp_subdev.o \
                   tx_isp_proc.o \
                   tx_isp_sysfs.o \
                   tx_isp_vic.o \
                   tx_isp_csi.o \
                   tx_isp_fs.o \
                   tx_isp_tuning.o \
                   tx_isp_v4l2.o \
                   tx_isp_ae_zone.o \
                   tx_isp_subdev_mgmt.o \
                   tx_isp_vin.o

# ISP trace module objects  
tx-isp-trace-objs := tx-isp-trace.o

# Build both modules
obj-m := tx-isp-t31.o tx-isp-trace.o

# For kernel 3.10, Module.symvers is usually in the kernel build directory
# Adjust these paths to match your actual kernel build tree
KBUILD_EXTRA_SYMBOLS := $(KBUILD_OUTPUT)/Module.symvers

# If V4L2 is built as modules, you might need:
# KBUILD_EXTRA_SYMBOLS += $(KBUILD_OUTPUT)/drivers/media/v4l2-core/Module.symvers